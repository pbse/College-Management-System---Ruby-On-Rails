<% unless @subjects.blank? %>
  <div class="info">
    <div class="field_pair">
      <div class="label1"><%= t('total_subjects') %></div>
      <div class="label2"><%=": #{@subjects.total_entries}" %></div>
    </div>
  </div>
  <div class="submit-button">
    <%= link_to "#{t('export_as_csv')}" ,{:action=>'subject_details_csv',:sort_order=>@sort_order,:subject_search=>params[:subject_search],:course=>params[:course]},:target=>'_blank' %>
  </div>
  <div class="extender"></div>
  <div id="page-yield">
    <table id="report_table" align="center" width="100%" cellpadding="1" cellspacing="1">
      <tr class="tr-head sub-heading">
        <td><%= t('no_text') %></td>
        <% if @sort_order=="name DESC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('name')} &#8595;", :url=>{:action=>"subject_details",:sort_order=>"name ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% elsif @sort_order=="name ASC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('name')} &#8593;", :url=>{:action=>"subject_details",:sort_order=>"name DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% else %>
          <td class="batch_order">
            <%= link_to_remote  "#{t('name')}", :url=>{:action=>"subject_details",:sort_order=>"name DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% end %>

        <td><%= t('code') %></td>

        <% if @sort_order=="max_weekly_classes DESC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('max_weekly_classes')} &#8595;", :url=>{:action=>"subject_details",:sort_order=>"max_weekly_classes ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% elsif @sort_order=="max_weekly_classes ASC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('max_weekly_classes')} &#8593;", :url=>{:action=>"subject_details",:sort_order=>"max_weekly_classes DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% else %>
          <td class="batch_order">
            <%= link_to_remote  "#{t('max_weekly_classes')}", :url=>{:action=>"subject_details",:sort_order=>"max_weekly_classes DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% end %>

        <% if @sort_order=="batch_name DESC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('batch_name')} &#8595;", :url=>{:action=>"subject_details",:sort_order=>"batch_name ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% elsif @sort_order=="batch_name ASC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('batch_name')} &#8593;", :url=>{:action=>"subject_details",:sort_order=>"batch_name DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% else %>
          <td class="batch_order">
            <%= link_to_remote  "#{t('batch_name')}", :url=>{:action=>"subject_details",:sort_order=>"batch_name DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% end %>
        <%  if params[:subject_search] !=nil and params[:subject_search][:elective_subject]=="1" and params[:subject_search][:normal_subject]=="0"  %>
          <% if @sort_order=="student_count DESC" %>
            <td class="batch_order_select">
              <%= link_to_remote  "#{t('students')} &#8595;", :url=>{:action=>"subject_details",:sort_order=>"student_count ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% elsif @sort_order=="student_count ASC" %>
            <td class="batch_order_select">
              <%= link_to_remote  "#{t('students')} &#8593;", :url=>{:action=>"subject_details",:sort_order=>"student_count DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% else %>
            <td class="batch_order">
              <%= link_to_remote  "#{t('students')}", :url=>{:action=>"subject_details",:sort_order=>"student_count DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% end %>
        <% else %>
          <% if @sort_order=="elective_group_id DESC" %>
            <td class="batch_order_select">
              <%= link_to_remote  "#{t('elective_subject')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E; &#8595;", :url=>{:action=>"subject_details",:sort_order=>"elective_group_id ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% elsif @sort_order=="elective_group_id ASC" %>
            <td class="batch_order_select">
              <%= link_to_remote  "#{t('elective_subject')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E; &#8593;", :url=>{:action=>"subject_details",:sort_order=>"elective_group_id DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% else %>
            <td class="batch_order">
              <%= link_to_remote  "#{t('elective_subject')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E;", :url=>{:action=>"subject_details",:sort_order=>"elective_group_id DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
            </td>
          <% end %>
        <% end %>
        <% if @sort_order=="no_exams DESC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('exams_text')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E; &#8595;", :url=>{:action=>"subject_details",:sort_order=>"no_exams ASC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% elsif @sort_order=="no_exams ASC" %>
          <td class="batch_order_select">
            <%= link_to_remote  "#{t('exams_text')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E; &#8593;", :url=>{:action=>"subject_details",:sort_order=>"no_exams DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% else %>
          <td class="batch_order">
            <%= link_to_remote  "#{t('exam_text')} &#x200E;(#{t('yes_text')}/#{t('no_texts')})&#x200E;", :url=>{:action=>"subject_details",:sort_order=>"no_exams DESC",:subject_search=>params[:subject_search],:course=>params[:course]} %>
          </td>
        <% end %>
      </tr>
      <% page_count=0 %>
      <% @subjects.each_with_index do |s,@i| %>
        <% if params[:page].present? %>
          <% if params[:page].to_i >= 1 %>
            <% @i = @i  + (params[:page].to_i - 1) * @subjects.per_page.to_i %>
          <% end %> <%else %> <% @i = @i %>
        <% end %>
        <% page_count+=1 %>
        <tr class="tr-<%= cycle('odd', 'even') %>">
          <td class="col-5"> <%=@i+1 %></td>
          <% if @sort_order=="name ASC" or @sort_order=="name DESC" %>
            <td class="col-2 batch_order_select"><%= s.name %></td>
          <% else %>
            <td class="col-2"><%= s.name %></td>
          <% end %>
          <td class="col-4"><%= s.code %></td>
          <% if @sort_order=="max_weekly_classes ASC" or @sort_order=="max_weekly_classes DESC" %>
            <td class="col-6 batch_order_select"><%= s.max_weekly_classes %></td>
          <% else %>
            <td class="col-6"><%= s.max_weekly_classes %></td>
          <% end %>
          <% if @sort_order=="batch_name ASC" or @sort_order=="batch_name DESC" %>
            <td class="col-2 batch_order_select"><%="#{s.c_code}-#{s.batch_name}" %></td>
          <% else %>
            <td class="col-2"><%= "#{s.c_code}-#{s.batch_name}" %></td>
          <% end %>
          <% if params[:subject_search] !=nil and params[:subject_search][:elective_subject]=="1" and params[:subject_search][:normal_subject]=="0" %>
            <% if @sort_order=="student_count ASC" or @sort_order=="student_count DESC" %>
              <td class="col-2 batch_order_select"><%=link_to "#{s.student_count}" ,{:action=>'students_all',:subject_id=>s.id}%></td>
            <% else %>
              <td class="col-2"><%=link_to "#{s.student_count}",{:action=>'students_all',:subject_id=>s.id}%></td>
            <% end %>
          <% else %>
            <% if @sort_order=="elective_group_id ASC" or @sort_order=="elective_group_id DESC" %>
              <td class="col-4 batch_order_select"><%= s.elective_group_id==nil ? t('no_texts') : t('yes_text') %></td>
            <% else %>
              <td class="col-4"><%= s.elective_group_id==nil ? t('no_texts') : t('yes_text') %></td>
            <% end %>
          <% end %>
          <% if @sort_order=="no_exams ASC" or @sort_order=="no_exams DESC" %>
            <td class="col-6 batch_order_select"><%= s.no_exams==true ? t('no_texts') : t('yes_text') %></td>
          <% else %>
            <td class="col-6"><%= s.no_exams==true ? t('no_texts') : t('yes_text') %></td>
          <% end %>
        </tr>
      <% end %>
    </table>
    <% unless @subjects.per_page.to_i > @subjects.total_entries.to_i %>
      <div class="pagination_list">
        <div class="pagination_text">
          <%= "#{t('showing')} #{@i+1-(page_count-1)}-#{@i+1} #{t('of')} #{@subjects.total_entries}" %>
        </div>
        <%= will_paginate @subjects,:renderer => 'RemoteLinkRenderer' ,:page_links=>false ,:params=>{:sort_order=>@sort_order,:subject_search=>params[:subject_search],:course=>params[:course]}%>
      </div>
    <% end %>
  <% else %>
    <p class="flash-msg"> <%= t('no_subject_present') %></p>
  <% end %>
</div>
